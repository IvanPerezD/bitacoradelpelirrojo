<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bitácora del Pelirrojo</title>
  <style>

.label {
  font-family: 'Arial', sans-serif;
  font-weight: bold;
  font-size: 1.2rem;
  text-align: center;
  display: block;
  text-shadow: 1px 1px 3px black;
  color: white;
}


    :root {
      --logo-scale-inicial: 3;
      --logo-scale-final: 1.5;
      --logo-top-inicial: 2rem;
      --logo-top-final: 1rem;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-image: url('fondo.jpg');
      background-size: cover;
      background-attachment: fixed;
      background-position: center;
      background-repeat: no-repeat;
      z-index: -1;
      filter: brightness(0.55);
    }

    .fixed-logo {
      position: fixed;
      left: -10vw;
      top: 70vh;
      transform: translateY(-50%);
      width: 50vw;
      max-width: 850px;
      z-index: 500;
      opacity: 1;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .titulo-imagen {
      position: absolute;
      top: var(--logo-top-inicial);
      left: 60%;
      transform: translateX(-50%) scale(var(--logo-scale-inicial));
      transition: transform 0.5s ease, left 0.5s ease, top 0.5s ease, opacity 0.3s ease;
      max-width: 20vw;
      height: auto;
      z-index: 10;
      will-change: transform, left, top, opacity;
      opacity: 1;
      pointer-events: none;
    }

    #titulo-placeholder {
      height: 7px;
    }

    body {
      margin: 0;
      padding-left: 5vw;
      font-family: 'Arial', sans-serif;
      color: #fff;
      background-color: #000;
      overflow-x: hidden;
    }

    .timeline-container {
      font-family: 'Shadows Into Light';
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      min-height: 100vh;
      padding-top: 25rem;
      padding-bottom: 2rem;
      width: 100%;
      box-sizing: border-box;
    }

    /* Fijo ancho de timeline */
    .timeline {
      position: relative;
      width: 650px;
      margin: 0 auto;
      padding-left: 30px;
      border-left: 4px solid #FFFFFF;
      background-color: rgba(0, 0, 0, 0.4);
      border-radius: 10px;
      padding: 5rem;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      box-sizing: border-box;
      transition: width 0.3s ease;
    }

    .event {
      position: relative;
      margin: 2vh 0;
      cursor: pointer;
    }

    .event::before {
      content: "";
      position: absolute;
      left: -11px;
      top: 0;
      width: 20px;
      height: 20px;
      background-color: #e63946;
      border: 3px solid #fff;
      border-radius: 50%;
      z-index: 1;
      transition: transform 0.3s ease;
    }

    .event:hover::before {
      transform: scale(1.2);
    }

    .label {
      font-weight: bold;
      font-size: 1.2rem;
      text-align: center;
      display: block;
      text-shadow: 1px 1px 3px black;
      color: white;
    }

    .details {
      max-height: 0;
      overflow: visible; /* <-- CAMBIO AQUÍ */
      opacity: 0;
      transition: all 0.5s ease;
      background-color: rgba(34, 34, 34, 0.5);
      margin-top: 0.5rem;
      border-left: 4px solid #e63946;
      padding: 0 1rem;
      text-align: center;
      border-radius: 10px;
      position: relative; /* para z-index */
      z-index: 1;
    }

    .event:hover .details,
    .event.active .details {
      max-height: 1500px;
      padding: 1rem;
      opacity: 1;
    }

    /* Estilos para imágenes y carrusel */

    /* Imagen pequeña en escritorio con zoom hover */
    .details img {
      max-width: 200px;
      transition: transform 0.3s ease;
      cursor: pointer;
      border-radius: 10px;
      margin-bottom: 1rem;
      position: relative;
      z-index: 2;
    }

    .details img:hover {
      transform: scale(1.5);
      z-index: 10;
    }

    /* Carrusel */
    .carousel {
      position: relative;
      width: 100%;
      max-width: 350px;
      margin: 0 auto;
      overflow: hidden;
    }

    .carousel img {
      width: 100%;
      display: none;
      border-radius: 10px;
      margin-bottom: 1rem;
      user-select: none;
    }

    .carousel img.active {
      display: block;
    }

    .carousel button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(230, 57, 70, 0.7);
      border: none;
      color: white;
      font-size: 1.5rem;
      padding: 0.2rem 0.6rem;
      cursor: pointer;
      border-radius: 5px;
      user-select: none;
      z-index: 10;
    }

    .carousel button.prev {
      left: 5px;
    }

    .carousel button.next {
      right: 5px;
    }

    /* Móvil: imágenes normales sin zoom y carrusel visible */
    @media (max-width: 900px) {
      .details img {
        max-width: 100% !important;
        cursor: default;
        transform: none !important;
      }

      .carousel button {
        display: block;
      }
    }

    /* Ocultar botones en escritorio */
    @media (min-width: 901px) {
      .carousel button {
        display: none;
      }
      .carousel img {
        display: block !important;
        max-width: 200px;
      }
    }

    /* Media queries para pantallas pequeñas */
    @media (max-width: 900px) {
      body {
        padding-left: 3vw;
      }

      .titulo-imagen {
        position: fixed;
        top: 2rem;
        left: 50%;
        transform: translateX(-50%) scale(1);
        max-width: 90vw;
        z-index: 1000;
        opacity: 1;
        pointer-events: none;
        will-change: transform, left, top, opacity;
        transition: top 0.3s ease, opacity 0.3s ease, transform 0.3s ease;
      }

      .timeline {
        width: 85vw;
        padding-left: 20px;
        min-width: 240px;
      }
    }

    @media (max-width: 600px) {
      .titulo-imagen {
        position: fixed;
        top: 2rem;
        left: 50%;
        transform: translateX(-50%) scale(1);
        max-width: 90vw;
        z-index: 1000;
        opacity: 1;
        pointer-events: none;
        will-change: transform, left, top, opacity;
        transition: top 0.3s ease, opacity 0.3s ease, transform 0.3s ease;
      }

      .timeline {
        width: 95vw;
        padding-left: 10px;
        min-width: 200px;
      }
    }

    @media (max-width: 400px) {
      .titulo-imagen {
        position: fixed;
        top: 2rem;
        left: 50%;
        transform: translateX(-50%) scale(1);
        max-width: 90vw;
        z-index: 1000;
        opacity: 1;
        pointer-events: none;
        will-change: transform, left, top, opacity;
        transition: top 0.3s ease, opacity 0.3s ease, transform 0.3s ease;
      }

      .timeline {
        width: 98vw;
        padding-left: 5px;
        min-width: 180px;
      }
    }

    @media (max-width: 1850px) {
      .fixed-logo {
        display: none;
      }
    }

    @media (max-width: 900px) {
      .event::before {
        width: 20px !important;
        height: 20px !important;
        left: 45px !important;
        top: 0 !important;
        border-width: 3px !important;
      }
    }

    @media (max-width: 600px) {
      .event::before {
        width: 18px !important;
        height: 18px !important;
        left: 25px !important;
        top: 0 !important;
        border-width: 3px !important;
      }
    }

    @media (max-width: 400px) {
      .event::before {
        width: 15px !important;
        height: 15px !important;
        left: 20px !important;
        top: 0 !important;
        border-width: 3px !important;
      }
    }

</style>

</head>
<body>
  <img src="shanks_29.png" alt="Logo de Shanks" class="titulo-imagen" id="tituloImagen" />
  <img src="titulo-shanks.png" alt="Título Bitácora del Pelirrojo" class="titulo-imagen" id="tituloImagen" />
  <div id="titulo-placeholder"></div>

  <div class="timeline-container">
    <div class="timeline" id="timeline">
      <div class="event">
        <div class="label">Hace 39 años</div>
        <div class="details">
          <p>ROGER SE ENCUENTRA A SHANKS EN UN COFRE TRAS EL INCIDENTE DE GOD VALLEY EN DICHA ISLA. EL NIÑO SONRÍE MIENTRAS VE A LA TRIPULACIÓN DE ROGER.</p>
          <img src="1.jpg" alt="Evento hace 39 años">
          <img src="2.jpg" alt="Evento hace 39 años">
        </div>
      </div>

      <div class="event">
        <div class="label">Hace 30 años</div>
        <div class="details">
          <p>SHANKS Y BUGGY FORMAN PARTE DE LA TRIPULACIÓN DE ROGER. EVENTUALMENTE, SU COMPAÑERO BUGGY ENCUENTRA UNA FRUTA DEL DIABLO Y HACE QUE, POR ACCIDENTE, SE COMA LA FRUTA QUE TENIA PENSADO VENDER POR UN GRAN TESORO.</p>
          <img src="3.jpg" alt="Evento hace 30 años">
          <img src="4.jpg" alt="Evento hace 30 años">
        </div>
      </div>

      <div class="event">
        <div class="label">Hace 28 años</div>
        <div class="details">
          <p>DESCUBREN LA ENFERMEDAD DE SU CAPITÁN, GOLD ROGER.</p>
          <img src="5.jpg" alt="Evento hace 28 años">
        </div>
      </div>

      <div class="event">
        <div class="label">Hace 27 años</div>
        <div class="details">
          <p>PARTICIPA EN LA BATALLA DE EDD WAR. DICHA BATALLA ES CONTRA SHIKI 'EL LEÓN DORADO', UNO DE LOS ANTIGUOS INTEGRANTES DE LOS PIRATAS DE ROCKS, QUIEN LO DESAFIA TRAS LA NEGATIVA DE ROGER DE 'CONQUISTAR EL MUNDO JUNTO A ÉL'. LA BATALLA ACABA EN VICTORIA PARA LOS PIRATAS DE ROGER TRAS UNA 'DESAFORTUNADA' TORMENTA QUE ACABA CON LA FLOTA DE SHIKI.</p>
          <img src="6.jpg" alt="Evento hace 27 años">
          <img src="7.jpg" alt="Evento hace 27 años">
        </div>
      </div>

      <div class="event">
        <div class="label">Hace 25 años</div>
        <div class="details">
          <p>DURANTE UN ENCONTRONAZO CON LA BANDA DE SHIROHIGE, CONOCE A UN JOVEN MARSHALL D TEACH, DE QUIEN SE COMENTA QUE NUNCA DUERME. TRAS LOS EVENTOS DE ESTE SUCESO, ODEN SE UNE A LA BANDA DE ROGER Y JUNTOS DECIDEN IR HACIA 'LAUGH TALE'. EN LA PARTE FINAL DEL TRAYECTO, SHANKS DECIDE NO IR A LA ÚLTIMA ISLA PARA PODER CUIDAR DE SU COMPAÑERO BUGGY, EL CUAL ESTA ENFERMO. TRAS EL REGRESO DE LA BANDA, ROGER LE DA UNA INFORMACIÓN QUE HACE QUE SE EMOCIONE. POSTERIORMENTE, TRAS LA PROCLAMACIÓN DE ROGER COMO EL REY DE LOS PIRATAS, SE DISUELVE LA BANDA.</p>
          <img src="9.jpg" alt="Evento hace 25 años">
          <img src="10.jpg" alt="Evento hace 25 años">
        </div>
      </div>

      <div class="event">
        <div class="label">Hace 22 años</div>
        <div class="details">
          <p>PRESENCIA LA EJECUCIÓN DE ROGER. BUGGY, QUE ADMIRA AL JOVEN PELIRROJO POR QUE VE EN ÉL A UN SUCESOR DE ROGER, LE PROPONE FORMAR UNA NUEVA BANDA PIRATA JUNTOS PARA RECLAMAR EL ONE PIECE, PERO SHANKS SE OPONE ARGUMENTANDO QUE 'AUN NO ES EL MOMENTO'. ANTE ESTA NEGATIVA, BUGGY SE ENFADA CON ÉL,  MARCANDO ASÍ EL FIN DE SU AMISTAD.</p>
          <img src="11.jpg" alt="Evento hace 22 años">
          <img src="12.jpg" alt="Evento hace 22 años">
        </div>
      </div>

      <div class="event">
        <div class="label">Hace 14 años</div>
        <div class="details">
          <p>SE ENCUENTRA CON SCOPPER GABAN, ANTIGUO NAVEGANTE DE LOS PIRATAS DE ROGER, EN LA TIERRA DE LOS GIGANTES, ELBAPH. SHANKS PARECE TENER UNA MARCA EN SU BRAZO IZQUIERDO QUE RECUERDA A LA DE LOS CABALLEROS SAGRADOS. ESE MISMO DÍA EN ELBAPH, SE ACABA CON LA VIDA DE SU REY HARALD, Y SE ROBA EL UNA FRUTA DEL DIABLO MÍTICA, RELIQUIA DE ESE PAÍS.</p>
          <img src="13.jpg" alt="Evento hace 26 años">
        </div>
      </div>

      <div class="event">
        <div class="label">Hace 13 años</div>
        <div class="details">
          <p>DURANTE UN ATAQUE A UN BARCO DEL GOBIERNO MUNDIAL, LA BANDA DE LOS PIRTAS DEL PELIRROJO SE HACEN CON LA FRUTA 'GOMU GOMU', LA CUAL ERA ESCOLTADA POR EL CP9. UNA FRUTA QUE RESULTÓ SER LEGENDARIA Y QUE PARECÍA 'SER ESQUIVA' A LOS DESEOS DEL GOBIERNO MUNDIAL.</p>
          <img src="14.jpg" alt="Evento hace 13 años">
        </div>
      </div>

      <div class="event">
        <div class="label">Hace 12 años</div>
        <div class="details">
          <p>DURANTE SU ESTANCIA EN VILLA FOOSHA, CERCA DEL REINO DE GOA, EN EL EAST BLUE, UN JOVEN LUFFY SE COME POR ACCIDENTE LA FRUTA 'GOMU GOMU' MIENTRAS ESTÁ EN UN BAR FESTEJANDO CON LA BANDA DEL PELIRROJO. TRAS ELLO, SHANKS SE VE ENVUELTO EN UN INCIDENTE CON UNOS BANDIDOS DE LA MONTAÑA QUE ACABA CON EL SECUESTRO DE LUFFY POR PARTE DEL CABECILLA DE LA BANDA. SHANKS ACABA RESOLVIENDO LA SITUACIÓN, SACRIFICANDO SU BRAZO ANTE UN REY MARINO CERCA DE LA COSTA DE ALDEA POR 'EL FUTURO DE LA NUEVA ERA'.</p>
          <img src="15.jpg" alt="Evento hace 12 años">
          <img src="16.jpg" alt="Evento hace 12 años">
        </div>
      </div>

      <div class="event">
        <div class="label">Hace 6 años</div>
        <div class="details">
          <p>EL PELIRROJO ES NOMBRADO COMO UNO DE LOS CUATRO EMPERADORES DEL MAR CON UNA RECOMPENSA DE TOTAL DE 4.048.900.000 BERRIES.</p>
          <img src="17.jpg" alt="Evento hace 6 años">
        </div>
      </div>

      <div class="event">
        <div class="label">Hace 4 años</div>
        <div class="details">
          <p>SHANKS Y ACE SE ENCUENTRAN EN UNA CIERTA ISLA DEL NUEVO MUNDO.ALLI, ADEMÁS DE HABLAR DE LUFFY, ACE FUE ENVIADO POR SHIROHIGE PARA ADVERTIR A SHANKS DE QUE NO INTERFIRIERA EN SU MISIÓN DE CAZAR A TEACH. SHANKS EN CAMBIO, LE ADVIERTE A ACE QUE NO SUBESTIME A ESE PIRATA Y LE PIDE QUE ABANDONE ESA MISIÓN SUICIDA.</p>
          <img src="18.jpg" alt="Evento hace 26 años">
        </div>
      </div>

      <div class="event">
        <div class="label">Hace 2 años</div>
        <div class="details">
          <p>EN EL NUEVO MUNDO, A BORDO DEL MOBY DICK, BARCO DEL LEGENDARIO EMPERADOR DEL MAR SHIROHIGE, SHANKS Y NEWGATE SE REÚNEN. EL PELIRROJO INTENTA PERSUADIRLO DE SU CAZA A MARSHALL D TEACH. SHIROHIGE RECHAZA ESA PROPUESTA CON FIRMEZA Y AMBOS ACABAN CHOCANDO ARMAS, HACIENDO QUE TRAS EL IMPACTO, EL CIELO QUEDARA DIVIDIDO EN DOS. ESTE ENCUENTRO MARCA EL PRELUDIO A LO QUE POSTERIORMENTE SERIA CONOCIDA COMO 'LA GUERRA DE MARINEFORD'. DURANTE DICHA GUERRA, SHANKS LUCHA CONTRA EL EMPERADOR DEL MAR KAIDO, PARA QUE ESTE NO PUEDA PARTICIPAR EN LA BATALLA. FINALMENTE, ACABA LLEGANDO AL CAMPO DE BATALLA, TENIENDO UN ENCONTRONAZO CON EL ALMIRANTE SAKAZUKI Y PONIENDO FIN A LA BATALLA CON SU PRESENCIA.</p>
          <img src="19.jpg" alt="Evento hace 26 años">
          <img src="20.jpg" alt="Evento hace 26 años">
          <img src="21.jpg" alt="Evento hace 26 años">
          <img src="22.jpg" alt="Evento hace 26 años">

        </div>
      </div>


      <div class="event">
        <div class="label">En la actualidad</div>
        <div class="details">
          <p>TRAS DERROTAR Y ANIQUILAR A LA TRIPULACIÓN A LA TRIPULACIÓN DE BARTOLOMEO, QUIEN RECLAMO UNO DE LOS PIRATAS DEL PELIRROJO PARA LA GRAN FLOTA DE LOS SOMBRERO DE PAJA, AL VIAJAR POR UN MAR CERCANO A LAS TIERRAS DE WANO, CONSIGUE, CON UN DOMINIO EXCEPCIONAL DEL HAKI, ACABAR CON LA AMENAZA DEL ALMIRANTE RYOKUGYU, QUIEN QUERIA APROVECHAR LA SITUACIÓN DE INESTABILIDAD DEL PAÍS PARA RECLAMAR EL TERRITORIO EN NOMBRE DEL GOBIERNO MUNDIAL. TRAS ELLO, AL VER EL NUEVO CARTEL DE SE BUSCA DE LUFFY, LE DICE A SU TRIPULANTE BENN BECKMAN QUE 'ES EL MOMENTO DE RECLAMAR EL LEGENDARIO TESORO ONE PIECE'. TRAS ELLO, EN ELBAPH, SU TRANQUILIDAD SE VE INTERRUMPIDA CON LA LLEGADA DE UNO DE LOS NOVATOS DE LA PEOR GENERACIÓN, EUSSTASS CAPTAIN KIDD. TRAS VISLUMBRAR LAS NEFASTAS CONSECUENCIAS QUE TRAIA CONSIGO EL PIRATA CON SU HAKI DE VISIÓN, ESTE LO ANIQUILA DE UN SOLO ATAQUE, 'DIVINE DEPARTURE'. FINALMENTE, SU TRIPULACIÓN ABANDONA LA ISLA DE LOS GIGANTES MIENTRAS LE SIGUEN LA PISTA AL PIRATA MARSHALL D TEACH.</p>
          <img src="23.jpg" alt="Evento actual">
          <img src="24.jpg" alt="Evento actual">
          <img src="25.jpg" alt="Evento actual">

        </div>
      </div>
    </div>
  </div>


<script>


  const titulo = document.getElementById('tituloImagen');
  const timeline = document.getElementById('timeline');

  let startLeft, endLeft;

  function updateMeasurements() {
    const rectTitulo = titulo.getBoundingClientRect();
    startLeft = rectTitulo.left + window.scrollX;

    const rectTimeline = timeline.getBoundingClientRect();
    endLeft = rectTimeline.right + 40;
  }

  const scrollRange = 25;
  const triggerOffsetTop = 50;

  function lerp(start, end, t) {
    return start + (end - start) * t;
  }

  function onScroll() {
    const scrollY = window.scrollY;
    const isMobile = window.matchMedia("(max-width: 900px)").matches;

    if (isMobile) {
      if (scrollY < triggerOffsetTop) {
        titulo.style.position = 'fixed';
        titulo.style.top = '2rem';
        titulo.style.left = '50%';
        titulo.style.transform = 'translateX(-50%) scale(1)';
        titulo.style.opacity = '1';
        titulo.style.pointerEvents = 'none';
      } else if (scrollY >= triggerOffsetTop && scrollY <= triggerOffsetTop + scrollRange * 4) {
        const progress = (scrollY - triggerOffsetTop) / (scrollRange * 4);
        const topVal = lerp(2, -10, progress) + 'rem';
        const opacityVal = lerp(1, 0, progress);
        titulo.style.top = topVal;
        titulo.style.opacity = opacityVal.toString();
        titulo.style.position = 'fixed';
        titulo.style.left = '50%';
        titulo.style.transform = 'translateX(-50%) scale(1)';
        titulo.style.pointerEvents = 'none';
      } else {
        titulo.style.position = 'fixed';
        titulo.style.top = '-10rem';
        titulo.style.opacity = '0';
        titulo.style.left = '50%';
        titulo.style.transform = 'translateX(-50%) scale(1)';
        titulo.style.pointerEvents = 'none';
      }
    } else {
      if (scrollY < triggerOffsetTop) {
        titulo.style.position = 'absolute';
        titulo.style.left = '60%';
        titulo.style.top = '6.5rem';
        titulo.style.transform = 'translateX(-80%) scale(3)';
        titulo.style.opacity = '1';
        titulo.style.pointerEvents = 'none';
      } else if (scrollY >= triggerOffsetTop && scrollY <= triggerOffsetTop + scrollRange) {
        const progress = (scrollY - triggerOffsetTop) / scrollRange;
        const currentLeft = lerp(startLeft, endLeft, progress);
        const scale = lerp(3, 1.5, progress);
        titulo.style.position = 'fixed';
        titulo.style.left = `${currentLeft}px`;
        titulo.style.top = '1rem';
        titulo.style.transform = `translateX(-50%) scale(${scale})`;
        titulo.style.opacity = '1';
        titulo.style.pointerEvents = 'none';
      } else {
        titulo.style.position = 'fixed';
        titulo.style.left = `${endLeft}px`;
        titulo.style.top = '1rem';
        titulo.style.transform = 'translateX(10%) scale(1.5)';
        titulo.style.opacity = '1';
        titulo.style.pointerEvents = 'none';
      }
    }
  }

  window.addEventListener('load', () => {
    updateMeasurements();
    onScroll();
  });

  window.addEventListener('resize', () => {
    updateMeasurements();
    onScroll();
  });

  window.addEventListener('scroll', () => {
    window.requestAnimationFrame(onScroll);
  });

  document.querySelectorAll('.event').forEach(event => {
    event.addEventListener('click', () => {
      event.classList.toggle('active');
    });
  });

  // Código JS para carrusel en móviles
  document.querySelectorAll('.carousel').forEach(carousel => {
    const images = carousel.querySelectorAll('img');
    const prevBtn = carousel.querySelector('.prev');
    const nextBtn = carousel.querySelector('.next');
    let currentIndex = 0;

    function showImage(index) {
      images.forEach((img, i) => {
        img.classList.toggle('active', i === index);
      });
    }

    prevBtn.addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + images.length) % images.length;
      showImage(currentIndex);
    });

    nextBtn.addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % images.length;
      showImage(currentIndex);
    });

    // Mostrar la primera imagen inicialmente
    showImage(currentIndex);
  });
</script>
</body>
</html>
